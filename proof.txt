
Semi-Formal Proof of Minimum Information for Calculating Key Transpositon in Western Music

1. Defining base situation


a. Written music notation is based on notes located on a staffline

b. Every note can be represented as (location, degree, frequency) where
            
        location -> ordered set representing location on staff
            location = {C, D, E, F, G, A, B}

        degree -> ordred set representing numerical representation within Western 12-tone scale,
            degree = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12}, where the distance between 

        frequency -> ordered set representing frequency in hz of note that we hear. The difference between each pitch is set as 1 (semitone) to keep consistant units with degree. For this excercise the size of the set will equal 12, corresponding to 1 octave
            frequency = {f0, f1, f2, f3, f4, f5, f6, f7,  f8, f9, f10, f11, }, where the the value of f0 is known as the 'key' of the sheet music 
           
   
b.  Western music is based off an ordered set of notes of size 12, which will henceforth be refered to as FULL. 

  
c.  Only 7 out of the 12 members of the set have a coordinate for location. 

    These members are:  

        location of  member l(x):C    D    E     F     G    A      B        
        degree of member d(x):   1    3    5     6     8    10     12
        frequency of member f(x):f1   f3   f5    f6    f8    f10    f12


******This subset of FULL will be refered to as visualizable subset (V)****


d.  V_(location) is used as an alphabet to create strings (in musical terms this "string" refers to consecutive notes on a staff) 
    To represent other members of FULL within a string, one can apply local operators (preoperators) to the locations in V. 
    The operators can be:
   
      <sharp>,   where <sharp>(x) -> 
            d(x) = x+1 and f(x) = frequency up a semitone

      <flat>, where <flat>(x) ->
            d(x) = x-1 and f(x) = frequency down a semitone

      <natural>, where <natural>(x) ->
            d(x) and f(x) are the degree and frequency specified in V

*******This set of local operators will be refered to as O*******


    Thus a music string consists of a list of locations and operators
 

e.  In addition, global operators can also be applied to the entire 
    string (aka key signature). There are two global operations (one with sharps and one with flats) corresponding to every note in FULL 
    
        A global operator is executed thus: 
        
          Given op is <sharp> or <flat>, key is a subset of V_location (notes in key signature), and s is a string, 
          op will be applied locally to every element of key in s


    To be a valid global operator, key is constrained in that 
    if every member of key's degree shifts to its post-operated value,
    the degrees in the set consisting of  op(key) + (V - key)  will still map
    to V via addition or subtraction

    For example:   
            
            If key = {B, E} and op = <flat>, the degree of B and E 
            (defined as B=12 and E=5 in FULL) would now shift to

            B = <flat>B = B-1 = 12-1 = 11
            E = <flat>E = E-1 = 5-1 = 4

            The set Q consisting of key + (V-key) would thus contain the 
            elements {<flat>B, <flat>E } + {C, D, F, G, A}, 
            which corresponds to values of  {10, 4} + {1, 3, 6, 8, 10}

            Ordering the values in N, you get 
                {1, 3, 4, 6, 8, 10, 11}
            Adding 2 to each value gives you 
                {1+2, 3+2, 4+2, 6+2, 8+2, 10+2, 11+2}

               ={3,   5,   6,   8,   10,  12,   1} = V
                (Remember 13mod12 is 1) 

            Thus since N maps to FULL, <flat>_{B,E} is a valid global 
            operation. (in musical terms, this is the key of B flat and 
            is represented by the Bflat key signature)
            
            

2.Proof

a. Define Transposition Problem
    
    define function TRANSPOSITION(f_new, string) that shifts f0 ("key") but retains the relative positions of notes in the string 
    For example: 
        

b.  Posit: If  TRANSPOSITION were applied onto a music notes on a staff, the result can be notated in such a way that a) staffline positions could shift while pitch differences between adjacent notes remain constant, b) notes with local operations would retain a local operation, and c) no new local operations would need to be added 
    
    a) and c) are trivial because adding one or more <sharp>s, <flats>s, or a <natural> can allow a note of any frequency appear at any location on the staff
    
    
    Proving (b)
c. Given string s on music in the key of k (f0=k) and new key= n (f0'=n):

            1. diff = n-k 
            2. Move s upwards diff positions on the staff
            3. Apply global operation corresponding with n to the string 
                                    - Since the global operation (key signature) associated with a key allows notes in V of that key to sit on the staff without local operations, this ensures notes previously without local operations will maintain their relative positions
                                    
             4. For notes with local operations, apply flats or sharps until the original relative positions are acheived. 
            
            
            
            
    


